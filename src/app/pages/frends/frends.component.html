<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button></ion-back-button>
        </ion-buttons>
        <ion-title></ion-title>
    </ion-toolbar>
</ion-header>
<ion-content>

    <h2>Friends</h2>
    <div *ngIf="isListState()">
        <ion-button expand="block" (click)="addNewFriends()">Add</ion-button>

        <ion-list>
            <ion-item *ngFor="let friend of friends">
                <ion-label>{{friend.id}} {{friend.nickName}} {{friend.name}} <ion-button expand="block" (click)="delete(friend.id)">delete</ion-button> </ion-label>
            </ion-item>
        </ion-list>

        <h2>Pending requests</h2>
        <ion-list>
            <ion-item *ngFor="let friend of pending">
                <ion-label>{{friend.id}} {{friend.nickName}} {{friend.name}} </ion-label>
                <ion-button expand="block" (click)="accept(friend.id)">Accept</ion-button>
                <ion-button expand="block" (click)="reject(friend.id)">Reject</ion-button>
            </ion-item>
        </ion-list>
    </div>
    <div  *ngIf="isSearchState()">

        <ion-searchbar  placeholder="type friend name email username"
                        (ionInput)="filterUserList($event)" showCancelButton="always" (ionCancel)="backToList()"></ion-searchbar>

        <ion-list >
            <ion-item *ngFor="let user of searchUsers">
                <ion-label >
                    <ion-text color="primary">
                        {{user.id}} {{ user.name }} {{user.nickName}}  <ion-button (click)="requestFriend(user.id)">Add</ion-button>
                    </ion-text>
                </ion-label>
            </ion-item>
        </ion-list>

        <ion-button (click)="switchLoggedUser()">Switch User {{currentUser.id}} {{currentUser.name}}</ion-button>

    </div>

</ion-content>
